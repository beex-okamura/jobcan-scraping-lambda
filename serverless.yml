service: jobcan-scraping-lambda
frameworkVersion: "3"

custom:
  serviceName: jobcan-scraping-${self:provider.stage}

provider:
  name: aws
  stage: ${opt:stage, "dev"}
  region: ap-northeast-1
  deploymentBucket: ${file(deployment/serverless.${opt:stage}.yml):deploy.bucket-name}
  environment: ${file(deployment/serverless.${opt:stage}.yml):environment.batch}
  timeout: 300
  role: ${file(deployment/serverless.${opt:stage}.yml):iam-role.batch}
  ecr:
    images:
      bop-system-scraping:
        uri: ${file(deployment/serverless.${opt:stage}.yml):deploy.ecr-repository.uri}
functions:
  DownloadZacCsv:
    name: ${self:service}-download-zac-csv-${self:provider.stage}
    image:
      name: bop-system-scraping
      command:
        - dist/handlers/zac.handler
      entryPoint:
        - /entry_script.sh
    events:
      - schedule: cron(0 22-12 1-7 * ? *)
      - schedule: cron(0 21 * * ? *)
      - schedule: cron(0 8 ? * 2 *)